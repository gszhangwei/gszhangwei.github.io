<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"/><meta name="theme-color" content="#222"/><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/><meta name="renderer" content="webkit"/><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"/><link rel="alternate" href="/rss.xml" title="Willie's Blog" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="Willie's Blog" type="application/atom+xml"><link rel="alternate" type="application/json" title="Willie's Blog" href="https://gszhangwei.github.io/feed.json"/><link rel="preconnect" href="https://s4.zstatic.net"/><link rel="preconnect" href="https://at.alicdn.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&display=swap&subset=latin,latin-ext" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="modulepreload" href="/js/siteInit.js"></link><link rel="modulepreload" href="/js/nyx-player-JFTCVABQ.js"></link><link rel="modulepreload" href="/js/copy-tex-KPZ64GCQ.js"></link><link rel="modulepreload" href="/js/post-6LLEVWGV.js"></link><link rel="modulepreload" href="/js/chunk-W6DPBPDY.js"></link><link rel="modulepreload" href="/js/index.esm-B5QALZBA.js"></link><link rel="modulepreload" href="/js/chunk-D4ZSMMI3.js"></link><link rel="modulepreload" href="/js/chunk-O3IWFEXF.js"></link><link rel="stylesheet" href="/css/siteInit.css" media="none" onload="this.media&#x3D;&#39;all&#39;"></link><link rel="preload" href="https://source.unsplash.com/1920x1080/?technology,computer" as="image" fetchpriority="high"><link rel="preload" href="https://source.unsplash.com/1920x1080/?city,architecture" as="image" fetchpriority="high"><link rel="preload" href="https://source.unsplash.com/1920x1080/?sky,clouds" as="image" fetchpriority="high"><link rel="preload" href="https://source.unsplash.com/1920x1080/?mountain,forest" as="image" fetchpriority="high"><link rel="preload" href="https://source.unsplash.com/1920x1080/?space,stars" as="image" fetchpriority="high"><link rel="preload" href="https://source.unsplash.com/1920x1080/?nature,landscape" as="image" fetchpriority="high"><meta name="keywords" content="Cursor"/><link rel="canonical" href="https://gszhangwei.github.io/2024/11/04/refactoring-with-cursor/"><link rel="stylesheet" href="/css/post.css?v=0.5.4"><link rel="stylesheet" href="/css/mermaid.css?v=0.5.4"><!-- 临时处理--><link rel="stylesheet" media="none" onload="this.media='all'" href="https://s4.zstatic.net/ajax/libs/KaTeX/0.16.9/katex.min.css"><title>参考ReAct框架构建Prompt，使用Cursor高效对代码进行重构</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="pagefind_mount"></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">参考ReAct框架构建Prompt，使用Cursor高效对代码进行重构</h1><div class="meta"><span class="item" title="创建时间：2024-11-04 16:42:03"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-11-04T16:42:03+08:00">2024-11-04</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>5.4k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>5 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">testName</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><ul><li class="item" style="background-image: url(&quot;https://source.unsplash.com/1920x1080/?technology,computer&quot;);"></li><li class="item" style="background-image: url(&quot;https://source.unsplash.com/1920x1080/?city,architecture&quot;);"></li><li class="item" style="background-image: url(&quot;https://source.unsplash.com/1920x1080/?sky,clouds&quot;);"></li><li class="item" style="background-image: url(&quot;https://source.unsplash.com/1920x1080/?mountain,forest&quot;);"></li><li class="item" style="background-image: url(&quot;https://source.unsplash.com/1920x1080/?space,stars&quot;);"></li><li class="item" style="background-image: url(&quot;https://source.unsplash.com/1920x1080/?nature,landscape&quot;);"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemListElement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/AI/" itemprop="item" rel="index" title="分类于AI"><span itemprop="name">AI<meta itemprop="position" content="0"/></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" data-pagefind-body="data-pagefind-body" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://gszhangwei.github.io/2024/11/04/refactoring-with-cursor/"/><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"/><meta itemprop="name" content="Wiilie Zhang"/><meta itemprop="description" content=", "/></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Willie's Blog"/></span><div class="body md" itemprop="articleBody"><h2 id="前言：从简单到复杂的AI编程之旅"><a href="#前言：从简单到复杂的AI编程之旅" class="headerlink" title="前言：从简单到复杂的AI编程之旅"></a>前言：从简单到复杂的AI编程之旅</h2><p>还记得<a target="_blank" rel="noopener" href="https://mail.google.com/mail/u/0/#search/%F0%9F%A4%AF/KtbxLrjhzfdqjKmxgVHVCjNmBkwrQzSPSq"><strong>上一篇博客</strong></a>中，我兴致勃勃地分享了如何用Cursor在短短半天内完成AI工具的从0到1实现。那时的我，就像刚学会骑自行车的孩子，对这个”新玩具”充满了热情。但很快，我就意识到这只是冰山一角。单纯的代码生成固然令人兴奋，但在实际开发中，我们面临的挑战远不止于此。</p>
<p>于是，我开始了一段更深入的探索之旅。特别是在代码重构这个领域，我发现Cursor展现出了令人惊喜的潜力。当我给它一些重构指令时，它不仅能理解我的意图，还能按照预期重构代码，而且速度快得惊人。这让我不禁幻想：如果能把这项技能应用到日常开发中，那岂不是能在别人还在埋头重构时，我已经可以优哉游哉地”摸鱼”了？</p>
<h2 id="现实给的一记重拳：复杂项目重构的困境"><a href="#现实给的一记重拳：复杂项目重构的困境" class="headerlink" title="现实给的一记重拳：复杂项目重构的困境"></a>现实给的一记重拳：复杂项目重构的困境</h2><p>然而，现实总是喜欢给我们一记重拳。当我满怀信心地将这种简单直接的重构方式应用到实际项目中时，很快就碰了壁。由于真实项目的复杂度远超简单的AI工具代码项目，简单的prompt在这里就像是用牙签撬动大象。</p>
<p><strong>遇到的主要问题：</strong></p>
<ol>
<li><strong><strong>改动范围失控</strong></strong>：就像是没有地图的探险，每次重构都像是在随机漫步。</li>
<li><strong><strong>重构策略混乱</strong></strong>：完全依赖大模型自动选择重构策略，就像是把方向盘交给了蒙着眼睛的司机。</li>
<li><strong><strong>上下文理解障碍</strong></strong>：即使使用了@Codebase，Cursor依然像是对整个项目背景一无所知，重构起来漫无目标。</li>
<li><strong><strong>代码审查负担</strong></strong>：每次改动都需要仔细审查，否则就像是在刀尖上跳舞，提心吊胆。</li>
<li><strong><strong>恶性循环</strong></strong>：越重构越乱，最后不得不推倒重来，陷入了一个”推倒重来-再次失败”的死循环。</li>
</ol>
<p><strong>问题根源分析：</strong><br>经过深入思考，总结出了几个核心原因：</p>
<ol>
<li><strong><strong>逻辑复杂度过高</strong></strong>：现实项目往往包含复杂的业务逻辑和条件判断。</li>
<li><strong><strong>框架知识欠缺</strong></strong>：没有给AI进行适当的框架Onboarding。</li>
<li><strong><strong>代码风格多样性</strong></strong>：不同开发者的编码风格差异带来的挑战。</li>
<li><strong><strong>上下文负担过重</strong></strong>：相互关联的代码太多，形成了复杂的依赖网络。</li>
<li><strong><strong>行为不可预测</strong></strong>：无法准确预知AI的下一步操作。</li>
</ol>
<h2 id="人机对比：重构思维的差异"><a href="#人机对比：重构思维的差异" class="headerlink" title="人机对比：重构思维的差异"></a>人机对比：重构思维的差异</h2><p>为了找到突破口，我开始思考：为什么同样是重构，人类开发者能够相对顺利地完成，而AI却频频踩坑？</p>
<p>人类开发者的重构方式：</p>
<ol>
<li><strong><strong>系统性分析</strong></strong>：首先识别和消除code smell，提升代码的可读性和可扩展性。</li>
<li><strong><strong>面向对象优化</strong></strong>：基于面向对象的最佳实践进行重构。</li>
<li><strong><strong>架构层面调整</strong></strong>：将代码重新组织到合适的层次结构中。</li>
<li><strong><strong>测试验证</strong></strong>：确保重构后的代码仍然符合预期行为。</li>
</ol>
<p>AI的重构方式：就像一个机械工人，简单地重复”修改代码”这个动作，缺乏我们<strong>期望的</strong>系统性思维和策略性规划。</p>
<h2 id="灵感突现：ReAct框架的启发"><a href="#灵感突现：ReAct框架的启发" class="headerlink" title="灵感突现：ReAct框架的启发"></a>灵感突现：ReAct框架的启发</h2><p>在寻找解决方案的过程中，我接触到了Agent和ReAct以及COT，这让我眼前一亮。如果能让AI像人类一样思考并且按照人类期望的方式进行思考，是否就能克服当前的困境？</p>
<h3 id="ReAct框架简介"><a href="#ReAct框架简介" class="headerlink" title="ReAct框架简介"></a>ReAct框架简介</h3><p>ReAct 框架是由 Shunyu Yao 等人在 2022 年提出的一种方法，旨在结合推理与行动，以提高大型语言模型（LLMs）的性能。该框架允许 LLMs 交替生成<strong>推理轨迹</strong>和<strong>任务特定操作</strong>，从而使模型能够诱导、跟踪和更新操作计划，并有效处理异常情况。</p>
<ul>
<li><strong><strong>与外部工具的交互</strong></strong>：ReAct 框架使 LLMs 能够与外部知识库或环境进行交互，从而获取额外信息，提供更可靠的回应。</li>
<li><strong><strong>性能提升</strong></strong>：研究表明，ReAct 在语言和决策任务上表现优于多个先进的基线模型，同时提高了 LLMs 的可解释性和可信度。</li>
<li><strong><strong>与链式思考（CoT）的结合</strong></strong>：将 ReAct 与链式思考结合使用，可以在推理过程中同时利用内部知识和外部信息，从而取得最佳效果。</li>
</ul>
<h2 id="实践：构建重构专用的Prompt"><a href="#实践：构建重构专用的Prompt" class="headerlink" title="实践：构建重构专用的Prompt"></a>实践：构建重构专用的Prompt</h2><p><strong>重构步骤设计：</strong></p>
<ol>
<li><strong><strong>基础清理</strong></strong>：识别和处理基本的code smell</li>
<li><strong><strong>面向对象优化</strong></strong>：应用面向对象的最佳实践</li>
<li><strong><strong>架构调整</strong></strong>：根据六边形架构的规范重组代码</li>
<li><strong><strong>错误修复</strong></strong>：处理明显的编译错误</li>
<li><strong><strong>人工复查</strong></strong>：补充细节优化</li>
<li><strong><strong>测试修复</strong></strong>：确保所有测试用例通过</li>
</ol>
<p><img loading="lazy" src="/../images/new_refactoring_processing.jpg" alt="new_refactoring_processing.jpg"></p>
<p><strong>重构Prompt模板设计：</strong></p>
<ol>
<li><strong><strong>上下文说明</strong></strong>：提供架构规范和最佳实践指南</li>
<li><strong><strong>思考步骤</strong></strong>：引导AI进行系统性分析</li>
<li><strong><strong>观察记录</strong></strong>：记录发现的问题</li>
<li><strong><strong>行动指南</strong></strong>：明确具体的重构步骤</li>
</ol>
<p><img loading="lazy" src="/../images/prompt_design.jpg" alt="prompt_design.jpg"></p>
<p>基于ReAct和COT的启发，设计了一个用于当前项目上DDD重构的Prompt（包含重构设计的前3步）：<br><strong>Prompt for Refactoring</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Context: 在六边形架构的DDD实现模式中，Application Service、Domain Service、Query 以及 Port 的设计和实现有一些最佳实践和经验。以下是总结的经验和适合的重构提示：</span><br><span class="line"><span class="bullet">1.</span> Application Service</span><br><span class="line"><span class="bullet">    -</span> 主要负责用例编排和事务管理，不包含业务逻辑，而是调用 Domain Service 执行具体操作。</span><br><span class="line"><span class="bullet">2.</span> Domain Service</span><br><span class="line"><span class="bullet">    -</span> 包含核心业务逻辑，处理复杂业务规则和操作，是领域模型的一部分。</span><br><span class="line"><span class="bullet">3.</span> Port</span><br><span class="line"><span class="bullet">    -</span> 定义应用程序与外部系统之间接口，包括 inbound 和 outbound 包中的 Repository 接口定义。</span><br><span class="line"></span><br><span class="line">基于上述上下文。请参照 @AcademyCourseDomainService.java  对当前文件进行重构，如果涉及 @EnrollmentApplicationService.java  的修改，也可以进行修改。使用 ReAct 框架按照下面的思考步骤来指导此过程，以分析、观察、执行并最终完成代码重构。</span><br><span class="line">Thought-1：是否有明显的code smell？</span><br><span class="line">Observation-1：有code smell：xxxx</span><br><span class="line">Action-1：使用这个code smell 对应的最佳实践进行重构</span><br><span class="line"></span><br><span class="line">Thought-2：是否有特别需要注意的code smell，比如说面向对象的5大基本原则，单一职责原则、开放封闭原则、里氏替换原则、依赖倒置原则和接口隔离原则？</span><br><span class="line">Observation-2：这几个地方xxxx，不符合单一职责原则</span><br><span class="line">Action-2：了解单一职责原则的最佳实践，并进行代码重构</span><br><span class="line"></span><br><span class="line">Thought-3：当前文件是什么Layer，需要遵循哪些职责？</span><br><span class="line">Observation-3：当前的文件是Domain service，里面有些实现xxxx做的事情不属于domain service的职责</span><br><span class="line">Action-3：根据Domain service职责，对这几个实现进行重构，分析这些做的事情属于哪些layer的职责，将实现挪到对应的Layer中去</span><br></pre></td></tr></table></figure>
<p>Cursor composer的输出：<br><img loading="lazy" src="/../images/prompt_result_1.png" alt="prompt_result_1.png"><br><img loading="lazy" src="/../images/prompt_result_2.png" alt="prompt_result_2.png"></p>
<h2 id="实验效果与经验总结"><a href="#实验效果与经验总结" class="headerlink" title="实验效果与经验总结"></a>实验效果与经验总结</h2><p>通过多轮实验，这种基于ReAct的重构Prompt编写方法展现出了明显的优势：</p>
<ol>
<li><strong>更高的结果正确性：</strong> 这种重构方法能够在仅需两到三轮的互动中，快速达成预期结果。与传统方法相比，ReAct和COT的结合使得模型能够更有效地整合信息和推理过程，从而减少了错误和不确定性。这种高效性使得用户在处理复杂问题时，能够更快地获得准确答案。</li>
<li><strong>目标导向的思考过程：</strong> 采用ReAct框架后，模型的思考方向更加符合用户的期望，而不是受到幻觉（即生成不实信息）的影响。通过引入额外信息源（观察的步骤会引入需要的信息），模型能够实时验证和更新其推理路径，从而确保所生成的信息是基于事实而非虚构。这一特性显著提升了用户对模型输出的信任度。</li>
<li><strong>可视化的思考与修改过程：</strong> 在Cursor的composer模式中，用户可以清晰地看到思考和修改的中间过程。这种透明性让开发者能够追踪每一步的修改步骤，从而更好地理解模型如何得出最终结论。通过展示具体的推理轨迹和所采取的行动，用户不仅能审视模型的决策过程，还能对其进行必要的调整和优化。</li>
</ol>
<h3 id="效果提升的关键因素："><a href="#效果提升的关键因素：" class="headerlink" title="效果提升的关键因素："></a>效果提升的关键因素：</h3><ol>
<li><strong><strong>边界清晰</strong></strong>：通过Context限定了AI的行为范围</li>
<li><strong><strong>步骤明确</strong></strong>：让AI按照预定的思维方式进行重构</li>
<li><strong><strong>反馈闭环</strong></strong>：每个步骤都有明确的观察和行动指南</li>
</ol>
<h3 id="思维方式的转变："><a href="#思维方式的转变：" class="headerlink" title="思维方式的转变："></a>思维方式的转变：</h3><p>这个过程让我意识到，使用AI的关键在于转变思维方式：从”问题导向”转向”引导式合作”。我们需要做的是：</p>
<ul>
<li>人负责分析和规划</li>
<li>AI负责执行具体细节</li>
<li>通过精心设计的Prompt建立桥梁</li>
</ul>
<h2 id="结语：AI编码助手使用的新范式"><a href="#结语：AI编码助手使用的新范式" class="headerlink" title="结语：AI编码助手使用的新范式"></a>结语：AI编码助手使用的新范式</h2><p>这次的探索不仅帮助我解决了代码重构的难题，更重要的是让我领悟到了一个道理：AI不是万能的，但通过正确的引导，它可以成为我们强大的助手，起到能力放大器的作用。当我们学会用”教练”而不是”提问者”的身份与AI互动时，往往能获得更好的结果。当然，这也给我们带来了新的要求：在与AI进行协作时，了解<strong>最佳实践</strong>和<strong>方法论</strong>成为了前提条件，只有这样，我们才能更有效地引导AI以正确的方式完成工作。</p>
<p>这种思维方式的转变，让我们能够更好地发挥人类的创造力和AI的执行力，从而提升<strong>代码质量</strong>和<strong>开发效率</strong>（在理想情况下，提升开发效率应当将节省下来的时间来促进代码质量的提高，而不是单纯追求高产出，否则我们可能会陷入另一个无法自拔的漩涡。追逐产出而忽视质量，最终仍然会导致技术债务高筑，增加维护成本，甚至影响项目的可持续性。因此，平衡效率与质量至关重要。通过注重代码的可读性、可维护性和合理的使用最佳实践，我们不仅能够提高开发速度，还能确保软件的长期健康和稳定性）。在未来，这种人机协作的模式也许会成为软件开发的一种新范式。</p>
<h2 id="最后：Prompt分享"><a href="#最后：Prompt分享" class="headerlink" title="最后：Prompt分享"></a>最后：Prompt分享</h2><p>经过实践，我们总结出了一个专门针对代码基础异味（code smell）重构的提示模板。如果你对代码基础异味的重构感兴趣，欢迎尝试使用这个站点下的<a target="_blank" rel="noopener" href="https://aigo.netlify.app/docs/codesemell/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93"><strong>Prompt模板</strong></a>。这个重构Prompt模版站点是为开发者量身打造的资源分享平台，旨在提供高效可行的Prompt模版，以提升使用Cursor进行重构的体验，主要面向希望通过AI优化重构过程的同事。其Prompt特色在于能够显著降低AI在重构时可能出现的幻觉。大家可以通过参考站点的<a target="_blank" rel="noopener" href="https://aigo.netlify.app/#%e5%bf%ab%e9%80%9f%e5%bc%80%e5%a7%8b"><strong>Quick Start</strong></a>操作快速上手，从而提升重构的准确率和效率，让大家更专注于最佳实践和方法论的思考。此外，我们也欢迎大家在使用Cursor或其他AI代码辅助工具的过程中，将有效的提示分享至<a target="_blank" rel="noopener" href="https://github.com/AI-performance-improvement/prompt-helper"><strong>这个代码库</strong></a>中。通过共同努力，我们可以建立一个实用的重构提示集合，帮助大家提升日常的重构效率和代码质量。后续我们将逐步总结出面向对象重构及DDD等框架型代码重构的可复用Prompt模板，并上传到这个<a target="_blank" rel="noopener" href="https://aigo.netlify.app/docs/codesemell/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93/"><strong>站点</strong></a>，如有需要请持续关注。</p>
<p>到此，我们的讨论就告一段落了。感谢大家的阅读和关注!</p>
<div class="tags"><a href="/tags/Cursor/" rel="tag"><i class="ic i-tag"></i>Cursor</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于 </span><time title="修改时间：2024-11-06 17:26:37" itemprop="dateModified" datetime="2024-11-06T17:26:37+08:00">2024-11-06</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img loading="lazy" src="/assets/wechatpay.png" alt="Wiilie Zhang 微信支付"/><p>微信支付</p></div><div><img loading="lazy" src="/assets/alipay.png" alt="Wiilie Zhang 支付宝"/><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>Wiilie Zhang<i class="ic i-at"><em>@</em></i>Willie's Blog</li><li class="link"><strong>本文链接：</strong><a href="https://gszhangwei.github.io/2024/11/04/refactoring-with-cursor/" title="参考ReAct框架构建Prompt，使用Cursor高效对代码进行重构">https://gszhangwei.github.io/2024/11/04/refactoring-with-cursor/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2024/09/26/AI_explore_Cursor/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;source.unsplash.com&#x2F;1920x1080&#x2F;?ocean,water" title="AI工具探索：震惊🤯，使用Cursor仅用半天就完成了AI工具的实现"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>AI</span><h3>AI工具探索：震惊🤯，使用Cursor仅用半天就完成了AI工具的实现</h3></a></div><div class="item right"><a href="/2024/11/15/refactoring-with-cursor-en/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;source.unsplash.com&#x2F;1920x1080&#x2F;?city,architecture" title="Building Prompts Using the ReAct Framework for Efficient Code Refactoring with Cursor"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>AI</span><h3>Building Prompts Using the ReAct Framework for Efficient Code Refactoring with Cursor</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80%EF%BC%9A%E4%BB%8E%E7%AE%80%E5%8D%95%E5%88%B0%E5%A4%8D%E6%9D%82%E7%9A%84AI%E7%BC%96%E7%A8%8B%E4%B9%8B%E6%97%85"><span class="toc-number">1.</span> <span class="toc-text">前言：从简单到复杂的AI编程之旅</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%B0%E5%AE%9E%E7%BB%99%E7%9A%84%E4%B8%80%E8%AE%B0%E9%87%8D%E6%8B%B3%EF%BC%9A%E5%A4%8D%E6%9D%82%E9%A1%B9%E7%9B%AE%E9%87%8D%E6%9E%84%E7%9A%84%E5%9B%B0%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">现实给的一记重拳：复杂项目重构的困境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%BA%E6%9C%BA%E5%AF%B9%E6%AF%94%EF%BC%9A%E9%87%8D%E6%9E%84%E6%80%9D%E7%BB%B4%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="toc-number">3.</span> <span class="toc-text">人机对比：重构思维的差异</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%81%B5%E6%84%9F%E7%AA%81%E7%8E%B0%EF%BC%9AReAct%E6%A1%86%E6%9E%B6%E7%9A%84%E5%90%AF%E5%8F%91"><span class="toc-number">4.</span> <span class="toc-text">灵感突现：ReAct框架的启发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ReAct%E6%A1%86%E6%9E%B6%E7%AE%80%E4%BB%8B"><span class="toc-number">4.1.</span> <span class="toc-text">ReAct框架简介</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B5%EF%BC%9A%E6%9E%84%E5%BB%BA%E9%87%8D%E6%9E%84%E4%B8%93%E7%94%A8%E7%9A%84Prompt"><span class="toc-number">5.</span> <span class="toc-text">实践：构建重构专用的Prompt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E6%95%88%E6%9E%9C%E4%B8%8E%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">实验效果与经验总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E6%8F%90%E5%8D%87%E7%9A%84%E5%85%B3%E9%94%AE%E5%9B%A0%E7%B4%A0%EF%BC%9A"><span class="toc-number">6.1.</span> <span class="toc-text">效果提升的关键因素：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E7%BB%B4%E6%96%B9%E5%BC%8F%E7%9A%84%E8%BD%AC%E5%8F%98%EF%BC%9A"><span class="toc-number">6.2.</span> <span class="toc-text">思维方式的转变：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AF%AD%EF%BC%9AAI%E7%BC%96%E7%A0%81%E5%8A%A9%E6%89%8B%E4%BD%BF%E7%94%A8%E7%9A%84%E6%96%B0%E8%8C%83%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">结语：AI编码助手使用的新范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%EF%BC%9APrompt%E5%88%86%E4%BA%AB"><span class="toc-number">8.</span> <span class="toc-text">最后：Prompt分享</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li ><a href="/2024/09/26/AI_explore_Cursor/" rel="bookmark" title="AI工具探索：震惊🤯，使用Cursor仅用半天就完成了AI工具的实现">AI工具探索：震惊🤯，使用Cursor仅用半天就完成了AI工具的实现</a></li><li  class="active"><a href="/2024/11/04/refactoring-with-cursor/" rel="bookmark" title="参考ReAct框架构建Prompt，使用Cursor高效对代码进行重构">参考ReAct框架构建Prompt，使用Cursor高效对代码进行重构</a></li><li ><a href="/2024/11/15/refactoring-with-cursor-en/" rel="bookmark" title="Building Prompts Using the ReAct Framework for Efficient Code Refactoring with Cursor">Building Prompts Using the ReAct Framework for Efficient Code Refactoring with Cursor</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="Wiilie Zhang" src="/assets/avatar.jpg"/><p class="name" itemprop="name">Wiilie Zhang</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">15</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">4</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">7</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/yourname" class="item github" title="https:&#x2F;&#x2F;github.com&#x2F;yourname"><i class="ic i-github"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/11/15/refactoring-with-cursor-en/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2024/09/26/AI_explore_Cursor/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div><div id="player"></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2024/12/11/guidelines-prompts-driven-development/">Guidelines of Prompts Driven Development</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Technology/" title="分类于Technology">Technology</a></div><span><a href="/2025/04/10/AI-workflows-improve-software-development-efficiencyt-en/">Structured Prompt-Driven Development Workflow - Transforming Software Development from 2 Days to 1 Hour</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2025/05/22/PDD-in-Data-Domain/">PDD在DATA领域的应用实践</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2025/06/09/AI-assisted-software-delivery-full-process-maturity-model-white-paper-en/">AI-Assisted Software Delivery Maturity Model:A Comprehensive Guide from L0 to L5</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2022/08/31/hello-world/">Hello World</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/AI/" title="分类于AI">AI</a></div><span><a href="/2024/09/26/AI_explore_Cursor/">AI工具探索：震惊🤯，使用Cursor仅用半天就完成了AI工具的实现</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2025/06/18/PDD-practice-in-the-field-of-data/">Structured prompt driven development, practiced in the field of data</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2025/06/03/AI-assisted-software-delivery-full-process-maturity-model-white-paper/">AI辅助软件交付全流程成熟度模型白皮书</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2025/02/27/prompts-driven-development/">结构化提示词驱动开发实践</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%8A%80%E6%9C%AF/" title="分类于技术">技术</a></div><span><a href="/2025/06/03/AI-assisted-development-of-new-qualitative-productivity-methodology/">AI-enabled software delivery maturity model interpretation and AI-assisted development of new qualitative productivity methodology</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2025</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">Wiilie Zhang @ testName</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">207k 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">3:08</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
    ispost: true,
    path: `2024/11/04/refactoring-with-cursor/`,
    favicon: {
        show: `（●´3｀●）やれやれだぜ`,
        hide: `(´Д｀)大変だ！`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    nocopy: "false",
    copyright: `复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。`,
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    }
};
</script><script src="/js/siteInit.js?v=0.5.4" type="module" fetchpriority="high" defer></script></body></html>