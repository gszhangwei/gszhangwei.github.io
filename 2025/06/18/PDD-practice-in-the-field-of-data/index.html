<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Willie Zhang">
    
    <!-- Completely eliminate flash of wrong theme -->
    <script>
        (function() {
            const THEME_KEY = "REDEFINE-THEME-STATUS";
            const DARK = "dark", LIGHT = "light";
            
            // Get preferred theme
            function getTheme() {
                try {
                    const saved = localStorage.getItem(THEME_KEY);
                    if (saved) {
                        const { isDark } = JSON.parse(saved);
                        return isDark ? DARK : LIGHT;
                    }
                } catch (e) {}
                
                return matchMedia("(prefers-color-scheme: dark)").matches ? DARK : LIGHT;
            }
            
            // Apply theme to document
            function applyTheme(theme) {
                const isDark = theme === DARK;
                const root = document.documentElement;
                
                // Set data attribute for CSS variables
                root.setAttribute("data-theme", theme);
                
                // Set classes for compatibility
                root.classList.add(theme);
                root.classList.remove(isDark ? LIGHT : DARK);
                root.style.colorScheme = theme;
            }
            
            // Initial application
            const theme = getTheme();
            applyTheme(theme);
            
            // Listen for system preference changes
            matchMedia("(prefers-color-scheme: dark)").addEventListener("change", ({ matches }) => {
                // Only update if using system preference (no localStorage entry)
                if (!localStorage.getItem(THEME_KEY)) {
                    applyTheme(matches ? DARK : LIGHT);
                }
            });
            
            // Set body classes once DOM is ready
            if (document.readyState !== "loading") {
                document.body.classList.add(theme + "-mode");
            } else {
                document.addEventListener("DOMContentLoaded", () => {
                    document.body.classList.add(theme + "-mode");
                    document.body.classList.remove((theme === DARK ? LIGHT : DARK) + "-mode");
                });
            }
        })();
    </script>
    
    <!-- Critical CSS to prevent flash -->
    <style>
        :root[data-theme="dark"] {
            --background-color: #202124;
            --background-color-transparent: rgba(32, 33, 36, 0.6);
            --second-background-color: #2d2e32;
            --third-background-color: #34353a;
            --third-background-color-transparent: rgba(32, 33, 36, 0.6);
            --primary-color: #0066CC;
            --first-text-color: #ffffff;
            --second-text-color: #eeeeee;
            --third-text-color: #bebec6;
            --fourth-text-color: #999999;
            --default-text-color: #bebec6;
            --invert-text-color: #373D3F;
            --border-color: rgba(255, 255, 255, 0.08);
            --selection-color: #0066CC;
            --shadow-color-1: rgba(255, 255, 255, 0.08);
            --shadow-color-2: rgba(255, 255, 255, 0.05);
        }
        
        :root[data-theme="light"] {
            --background-color: #fff;
            --background-color-transparent: rgba(255, 255, 255, 0.6);
            --second-background-color: #f8f8f8;
            --third-background-color: #f2f2f2;
            --third-background-color-transparent: rgba(241, 241, 241, 0.6);
            --primary-color: #0066CC;
            --first-text-color: #16171a;
            --second-text-color: #2f3037;
            --third-text-color: #5e5e5e;
            --fourth-text-color: #eeeeee;
            --default-text-color: #373D3F;
            --invert-text-color: #bebec6;
            --border-color: rgba(0, 0, 0, 0.08);
            --selection-color: #0066CC;
            --shadow-color-1: rgba(0, 0, 0, 0.08);
            --shadow-color-2: rgba(0, 0, 0, 0.05);
        }
        
        body {
            background-color: var(--background-color);
            color: var(--default-text-color);
        }
        
        /* Apply body classes as soon as DOM is ready */
        :root[data-theme="dark"] body {
            background-color: var(--background-color);
            color: var(--default-text-color);
        }
    </style>
    
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://gszhangwei.github.io/2025/06/18/pdd-practice-in-the-field-of-data/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
    
    
        
        <meta name="description" content="Hexo Theme Redefine, Redefine Your Hexo Journey.">
<meta property="og:type" content="article">
<meta property="og:title" content="Structured prompt driven development, practiced in the field of data">
<meta property="og:url" content="https://gszhangwei.github.io/2025/06/18/PDD-practice-in-the-field-of-data/index.html">
<meta property="og:site_name" content="Willie&#39;s Blog">
<meta property="og:description" content="Hexo Theme Redefine, Redefine Your Hexo Journey.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gszhangwei.github.io/images/redefine-og.webp">
<meta property="article:published_time" content="2025-06-18T11:00:00.000Z">
<meta property="article:modified_time" content="2025-06-18T01:52:24.643Z">
<meta property="article:author" content="Wiilie Zhang">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="Prompts">
<meta property="article:tag" content="Governance">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gszhangwei.github.io/images/redefine-og.webp">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/redefine-favicon.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-favicon.svg">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/redefine-favicon.svg">
    <!--- Page Info-->
    
    <title>
        
            Structured prompt driven development, practiced in the field of data | W. Zhang
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/css/build/tailwind.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"gszhangwei.github.io","root":"/","language":"zh-CN"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"delete_mask":false,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"pangu_js":false,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":false,"custom_message":null},"side_tools":{"gear_rotation":true,"auto_expand":false},"open_graph":{"enable":true,"image":"/images/redefine-og.webp","description":"Hexo Theme Redefine, Redefine Your Hexo Journey."},"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wallhaven-wqery6-light.webp","dark":"/images/wallhaven-wqery6-dark.webp"},"title":"W. Zhang","subtitle":{"text":[],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":false,"style":"default","links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"11.4.1"}},"version":"2.8.5","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/8/17 11:45:14"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>



<body>
	<div class="progress-bar-container">
	

	
	<span class="pjax-progress-bar"></span>
	<!--        <span class="swup-progress-icon">-->
	<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
	<!--        </span>-->
	
</div>

<main class="page-container" id="swup">

	

	<div class="main-content-container flex flex-col justify-between min-h-dvh">
		<div class="main-content-header">
			<header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                W. Zhang
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">5</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">4</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">14</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


		</div>

		<div class="main-content-body transition-fade-up">
			

			<div class="main-content">
				<div class="post-page-container flex relative justify-between box-border w-full h-full">
	<div class="article-content-container">

		<div class="article-title relative w-full">
			
			<div class="w-full flex items-center pt-6 justify-start">
				<h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">Structured prompt driven development, practiced in the field of data</h1>
			</div>
			
		</div>

		
		<div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
			<div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
				<img src="/images/wei_fixed.jpg">
			</div>
			<div class="info flex flex-col justify-between">
				<div class="author flex items-center">
					<span class="name text-default-text-color text-lg font-semibold">Willie Zhang</span>
					
					<span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv2</span>
					
				</div>
				<div class="meta-info">
					<div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2025-06-18 19:00</span>
        <span class="mobile">2025-06-18 19:00</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-06-18 09:52:24</span>
            <span class="mobile">2025-06-18 09:52:24</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/AI/">AI</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Prompts/">Prompts</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Governance/">Governance</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

				</div>
			</div>
		</div>
		

		


		<div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
			<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>What sparks emerge when the Structured Prompt Driven Development (PDD) methodology meets complex data processing scenarios?</p>
<p>A recent data project practice gave me the opportunity to systematically apply the PDD methodology to complex SQL development in BigQuery. Facing the dual challenges of 30+ business branch validation logic and billion-scale snapshot table performance optimization, traditional development approaches, especially without relevant complex SQL processing experience, would prove inadequate. After exploration and trial-and-error, I found a stable application path for PDD in the data domain, and more importantly, validated the practical effectiveness of this methodology in handling complex business logic.</p>
<p>If you’re also seeking methods to improve complex SQL development efficiency, or curious about how PDD works in data engineering projects, this practical experience may provide valuable reference for you.</p>
<h2 id="Project-Background"><a href="#Project-Background" class="headerlink" title="Project Background"></a>Project Background</h2><p><strong>Technical Environment</strong></p>
<ul>
<li><strong>Data Processing</strong>: Python + BigQuery + GCP</li>
<li><strong>Core Challenges</strong>: Complex business scenarios, 30+ business branches + billion-scale data volume</li>
</ul>
<p><strong>Business Objectives</strong><br>Associate and compare predicted data with actual revenue data, identify discrepancies and complete missing information</p>
<ul>
<li><strong>Data Association</strong>: Comprehensive comparison between predicted and actual revenue data, automatic identification of difference points</li>
<li><strong>Hierarchical Matching</strong>: Four-level progressive matching of Opportunity→Account→Market→Region, precise marking of matching depth</li>
<li><strong>Standard Unification</strong>: Cross-table field caliber consistency processing, eliminating data silos</li>
<li><strong>Decision Support</strong>: Output structured comparison datasets directly serving business analysis</li>
</ul>
<p><strong>Core Process</strong></p>
<ul>
<li><strong>Multi-condition Association</strong>: Sequentially match data at four levels (opportunity, account, market, and region), separately marking successful matches and unmatched records</li>
<li><strong>Snapshot-based Extension</strong>: Expand unmatched rows based on business snapshot dates to ensure aligned data views for all time points</li>
<li><strong>Business Data Completion</strong>: Complete missing fields (ID, name, status, etc.) from different data sources according to priority</li>
<li><strong>Field Standardization:</strong>: Unify regional abbreviations to full names, convert specific contract types, and supplement additional marking fields</li>
<li><strong>Aggregation and Deduplication</strong>: Merge all intermediate results, group and deduplicate by key dimensions, output final comparison report</li>
</ul>
<h2 id="Implementation-Process"><a href="#Implementation-Process" class="headerlink" title="Implementation Process"></a>Implementation Process</h2><h3 id="Phase-One-Exploration-and-Breakthrough-with-AI-Collaboration"><a href="#Phase-One-Exploration-and-Breakthrough-with-AI-Collaboration" class="headerlink" title="Phase One: Exploration and Breakthrough with AI Collaboration"></a>Phase One: Exploration and Breakthrough with AI Collaboration</h3><p><strong>Reality Challenges</strong></p>
<p>As an engineer who hadn’t touched complex SQL development for two years, facing such business scenarios, honestly, my first reaction was “where to start?” Fortunately, AI became my most capable assistant.</p>
<ol>
<li><strong>Rapid Breakthrough in Business Understanding</strong>: AI helped me quickly deconstruct seemingly complex business requirements<ul>
<li>Transformed abstract financial alignment requirements into specific data operation steps</li>
<li>Clarified the core logic of multi-level matching</li>
<li>Defined the data processing framework: <strong>Preprocessing → Extension → Completion → Output</strong></li>
</ul>
</li>
<li><strong>Iterative Exploration of Technical Solutions</strong>: Initially relied entirely on AI generation, but quickly encountered reality challenges<ul>
<li><strong>Complexity Challenge</strong>: The business logic complexity far exceeded AI’s one-time understanding capability</li>
<li><strong>SQL Code Understanding Difficulty</strong>: Required understanding AI-generated code thinking to gradually grasp overall approach, quite time-consuming</li>
<li><strong>Detail Explosion</strong>: Each abstract task hid countless technical details (table associations, matching strategies, exception handling, etc.)</li>
</ul>
</li>
<li><strong>First Complete Attempt</strong>: After multiple rounds of prompt iterations, AI generated a “giant SQL” of 1,157 lines<ul>
<li><strong>Result</strong>: Massive syntax errors in BigQuery </li>
<li><strong>After fixes</strong>: Business logic validation failed</li>
</ul>
</li>
</ol>
<p><img loading="lazy" src="/../images/sql_result_v1_en.png" alt="sql_result_v1_en.png"></p>
<p><img loading="lazy" src="/../images/sql_related_prompt_v1_en.png" alt="sql_related_prompt_v1_en.png"></p>
<p><strong>Key Takeaway</strong>: Although SQL generation didn’t meet expectations, the most valuable outcome of this phase was establishing a complete AI-assisted verification process:</p>
<p><code>Write structured prompts → Generate SQL code → Generate test datasets based on prompts → Complete logic verification</code></p>
<p>This process establishment laid a solid foundation for subsequent PDD methodology application. Although this experiment ended in “failure,” it gave me new insights into complex task decomposition: AI’s true value lies not in solving all problems at once, but in building efficient human-machine collaboration modes.</p>
<h3 id="Phase-Two-Understanding-Business-Essence-Reconstructing-Solutions"><a href="#Phase-Two-Understanding-Business-Essence-Reconstructing-Solutions" class="headerlink" title="Phase Two: Understanding Business Essence, Reconstructing Solutions"></a>Phase Two: Understanding Business Essence, Reconstructing Solutions</h3><p><strong>From Complex Back to Simple</strong></p>
<p>After the “detours” of the first phase, I began re-examining this seemingly complex requirement. Suddenly, a key insight emerged: this is essentially a data comparison problem between two tables! Once grasping this core, the entire solution approach became instantly clear, and fear of the unknown gradually dissipated.</p>
<p><strong>True Power of PDD Methodology</strong><br>Based on understanding the business essence, I began systematically reconstructing the solution:</p>
<ol>
<li><p><strong>Task Decomposition Strategy</strong></p>
<p>Following the principle of “<strong>essence determines boundaries, features determine details</strong>,” decomposed complex SQL requirements into relatively independent functional units, making each unit focus on solving a clear problem—this is a more effective AI collaboration mode</p>
<ul>
<li>Using PDD methodology, transformed implementation logic into structured prompts</li>
<li>Direct effect of task simplification: <strong>AI hallucinations significantly reduced, code generation accuracy substantially improved</strong></li>
</ul>
<p><img loading="lazy" src="/../images/sql_related_prompt_v2_1_en.png" alt="sql_related_prompt_v2_1_en.png"><img loading="lazy" src="/../images/sql_related_prompt_v2_2_en.png" alt="sql_related_prompt_v2_2_en.png"></p>
</li>
<li><p>Rapid Verification Loop</p>
<p>Benefit by the verification process established in phase one, each unit could quickly complete accuracy verification. The reconstruction results comparison:</p>
<p><img loading="lazy" src="/../images/comparison_of_reconstruction_effects_en.png" alt="comparison_of_reconstruction_effects_en.png"></p>
</li>
</ol>
<p>However, when switching to online environment with real billion-scale data validation, new challenges emerged, <strong>Performance Bottleneck</strong></p>
<ul>
<li><strong>Execution Time</strong>: Unable to complete in over 5 minutes</li>
<li><strong>Intermediate Results</strong>: Expanded to 268+GB<ul>
<li><img loading="lazy" src="/../images/SQL_processing_result.png" alt="SQL_processing_result.png"></li>
</ul>
</li>
<li><strong>Next Direction</strong>: SQL performance optimization became the new key focus</li>
</ul>
<h3 id="Phase-Three-Performance-Optimization"><a href="#Phase-Three-Performance-Optimization" class="headerlink" title="Phase Three: Performance Optimization"></a>Phase Three: Performance Optimization</h3><p>Facing performance bottlenecks, I adopted a systematic optimization strategy:</p>
<ol>
<li><p><strong>Problem Diagnosis and Root Cause Analysis</strong>:Through consultation with senior experts in the data domain within the team, deep analysis revealed the core problem</p>
<ul>
<li><strong>Core Issue</strong>: AI-generated SQL didn’t fully consider online data scale (already at billion level), performing multiple complex Join operations on large tables, seriously affecting query performance.</li>
</ul>
</li>
<li><p><strong>Optimization Strategy Formulation</strong>: Based on problem root causes, we determined four key optimization directions</p>
<ul>
<li><strong>Reduce Join Frequency:</strong>: Large tables should perform Join operations only once, obtaining all necessary data at once</li>
<li><strong>Front-end Data Filtering</strong>: Filter data before joining with large tables, effectively reducing driving table scale</li>
<li><strong>Precise Join Type Selection</strong>: Reasonably choose Inner Join or Left Join based on business requirements</li>
<li><strong>Step-by-step Query Optimization</strong>: Split complex queries into multiple steps, selecting only necessary fields, maximizing reduction of data transmission</li>
</ul>
</li>
<li><p><strong>Prompt Fine-tuning</strong>: For performance bottleneck parts, I conducted deep reconstruction of related prompts</p>
<ul>
<li><strong>Locate Optimization Targets</strong>: Precisely identify SQL fragments requiring optimization and their corresponding prompts</li>
<li><strong>Complex Problem Decomposition</strong>: According to established optimization directions, gradually decompose complex queries into independent prompt components</li>
<li><strong>Individual Verification Optimization</strong>: Generate SQL separately for each prompt component and conduct performance verification, ensuring complete decomposition of complex JOINs</li>
<li><strong>Task Decomposition Display</strong>: Optimized Prompt partial effects shown below:<br><img loading="lazy" src="/../images/performance_enhanced_result.png" alt="performance_enhanced_result.png"></li>
<li><strong>Before Optimization</strong>: SQL code execution timeout, no results in 5 minutes, involving data volume up to 268GB</li>
<li><strong>After Optimization</strong>: SQL code execution completed in only 37 seconds, final result data volume only 3.7GB</li>
</ul>
</li>
</ol>
<p>Performance improvement exceeded 800%, data processing efficiency significantly enhanced.</p>
<p><img loading="lazy" src="/../images/sql_processing_result_final.png" alt="sql_processing_result_final.png"></p>
<p>In this process, when optimization direction was determined, the completion logic actually needed rewriting, but through phases one and two exploration, the stable generation mode for expected SQL in the Data domain was established, so even rewriting was fine—this process was completed very quickly. Subsequent branch logic fixes were also handled, essentially similar steps, so won’t be demonstrated here.</p>
<h2 id="Structured-Prompt-Driven-Development-PDD-Application-Methodology-in-Data-Domain"><a href="#Structured-Prompt-Driven-Development-PDD-Application-Methodology-in-Data-Domain" class="headerlink" title="Structured Prompt Driven Development (PDD) Application Methodology in Data Domain"></a>Structured Prompt Driven Development (PDD) Application Methodology in Data Domain</h2><p>Based on this project practice, I summarized the PDD application methodology in data domain, particularly SQL development, providing reference for similar scenarios.</p>
<h3 id="Core-Applications-of-PDD-in-SQL-Development"><a href="#Core-Applications-of-PDD-in-SQL-Development" class="headerlink" title="Core Applications of PDD in SQL Development"></a>Core Applications of PDD in SQL Development</h3><p><strong>Scenario Classification and Strategy</strong></p>
<ul>
<li><strong>Simple Scenarios</strong>: Basic queries (no need for data preprocessing, small data volume requirements) can be directly generated without much adjustment</li>
<li><strong>Complex Scenarios</strong>: Require structured verification and iterative optimization<ul>
<li><strong>Definition of Done (DOD)</strong>: Pre-define acceptance criteria (such as output format, performance indicators) as validation baseline for initial SQL</li>
<li><strong>Iterative Optimization</strong>: Identify problems according to DOD (logic errors, edge cases), gradually adjust prompts, generate new SQL until passing all test cases</li>
<li><strong>Performance Tuning</strong>: Prioritize small-step refactoring (such as gradual optimization adjustments based on intermediate tables), avoid large-scale rewrites, reduce risks and maintain readability</li>
</ul>
</li>
</ul>
<h3 id="Overall-Practice-Process"><a href="#Overall-Practice-Process" class="headerlink" title="Overall Practice Process"></a>Overall Practice Process</h3><ul>
<li><strong>Human Input</strong>: Structured prompts(written according to <a target="_blank" rel="noopener" href="https://central.thoughtworks.net/blogs/ls/content/4612643020956565/structured-prompt-driven-development-workflow-transforming-software-development-from-2-days-to-1-hour-4f860bc0-64b6-4bee-b807-dc6f6ae6ffe0">PDD methodology</a>)</li>
<li><strong>AI Output</strong>: Initial SQL code</li>
<li><strong>Verification Phase</strong>: Check functional correctness against DOD</li>
<li><strong>Iterative Optimization</strong>: Adjust prompts based on problems (such as clarifying ambiguous logic)</li>
<li><strong>Performance Tuning</strong>: Combine AI suggestions for optimization (such as JOIN strategies, data preprocessing strategies, etc.)</li>
</ul>
<h3 id="Implementation-Recommendations-and-Best-Practices"><a href="#Implementation-Recommendations-and-Best-Practices" class="headerlink" title="Implementation Recommendations and Best Practices"></a>Implementation Recommendations and Best Practices</h3><ol>
<li><strong>Clarifying Business Requirements Before Formal Prompt Writing</strong><ul>
<li>Use documentation or other appropriate non-technical methods to reach consensus with business personnel</li>
<li>Clearly define the Definition of Done (DOD) to avoid frequent requirement changes during development (extremely important, especially in SQL scenarios, as it improves the efficiency of validating phased objectives)</li>
<li>Establish business analysis documentation to facilitate handling edge cases. When encountering edge cases, review the business analysis documentation and add them to the corresponding tasks in structured prompts</li>
</ul>
</li>
<li><strong>Determining Technical Solution Framework Based on Business Requirements</strong><ul>
<li><strong>When implementation plan is unclear</strong>:<ul>
<li>Communicate with AI based on organized data processing logic to obtain feasible abstract steps</li>
<li>Combine personal understanding to determine the final abstract steps of the implementation approach</li>
<li>Use structured prompts to generate SQL code based on the steps when the implementation approach becomes clear</li>
</ul>
</li>
<li><strong>When Implementation Approach is Clear</strong>:<ul>
<li>Define abstract steps for implementation requirements</li>
<li>Refine each task according to the abstract steps</li>
<li>Debug one task at a time; there’s no need to generate everything at once</li>
<li>After the first task is stabilized, use the same pattern to write prompts for the remaining tasks</li>
</ul>
</li>
</ul>
</li>
<li><strong>Iterative Optimization</strong><ul>
<li>For SQL that doesn’t meet expectations, locate the corresponding prompt area and supplement details</li>
<li>Combine professional reasoning models to obtain SQL optimization suggestions or implementation approach improvements</li>
<li>Update prompt records with content agreed upon with AI for future reuse</li>
</ul>
</li>
<li><strong>Overall Strategy</strong><ul>
<li>If unfamiliar with technical stack implementation details: First describe logic and framework in natural language, let AI generate SQL based on prompts, debug and finalize, then summarize and update back to the prompt file</li>
<li>If very familiar with implementation details: Can first write structured prompts and gradually generate SQL code; alternatively, directly hand-write SQL, then use AI to organize prompts according to PDD methodology patterns, summarizing the implementation approach and updating it to the prompt</li>
</ul>
</li>
</ol>
<h3 id="Personnel-Capability-Requirements-in-Complex-Scenarios"><a href="#Personnel-Capability-Requirements-in-Complex-Scenarios" class="headerlink" title="Personnel Capability Requirements in Complex Scenarios"></a>Personnel Capability Requirements in Complex Scenarios</h3><p><strong>Core Skills</strong></p>
<ul>
<li><strong>PDD Theory Mastery</strong>: Identify and eliminate AI hallucinations, such as correcting unreasonable JOIN logic, disabling subqueries, etc.</li>
<li><strong>Requirements Analysis and Solution Design Capability</strong>: Transform vague requirements into precise technical specifications, accurately locate data sources, and build modular solutions</li>
<li><strong>Structured Management</strong>: Transform unstructured requirements into structured expressions by organizing contextual information, and build high-quality prompts based on PDD theory</li>
</ul>
<p><strong>AI Cognitive Ability</strong></p>
<ul>
<li><strong>Advantage Recognition</strong>: Rapid prototyping, pattern recognition</li>
<li><strong>Disadvantage Awareness</strong>: Edge case handling, contextual ambiguity resolution</li>
<li><strong>Tool Selection</strong>: Use domain-specific models for technical tasks, general AI for general tasks</li>
<li><strong>Verification Attitude</strong>: Maintain an optimistic iterative mindset, strictly verify results based on DOD and manual review</li>
</ul>
<h2 id="Summary-and-Future-Outlook"><a href="#Summary-and-Future-Outlook" class="headerlink" title="Summary and Future Outlook"></a>Summary and Future Outlook</h2><p>Through this in-depth practice of PDD in the data domain, I have gained the following five key insights:</p>
<ol>
<li><strong>Goal-Oriented Path Planning</strong>: Clear Definition of Done (DOD) helps provide relatively clear directional guidance for the development process, reducing the possibility of getting lost when facing complex problems. Reasonably set goal frameworks can usually improve problem-solving efficiency.</li>
<li><strong>Methodological Adaptability Exploration</strong>: When facing entirely new technical domains, PDD core principles demonstrate certain applicability and migration potential. Through attempts and validation in different scenarios, we can gradually accumulate understanding of the methodology’s boundary conditions and applicable scope.</li>
<li><strong>Problem-Driven Progressive Breakthrough</strong>: When facing technical challenges or AI hallucination problems, divide-and-conquer, step-by-step strategies are far more effective than direct abandonment. Continuous exploration within set time frames and seeking professional support at key nodes can significantly improve problem-solving success rates.</li>
<li><strong>Cumulative Effect of Efficiency Improvement</strong>: In the initial exploration of new technical fields, AI tools may not immediately bring significant efficiency improvements. Substantial efficiency enhancement usually requires experiencing process optimization, experience pattern precipitation, and continuous practice accumulation.</li>
<li><strong>Positive Cycle of Personal Capability Growth</strong>: Under the AI First Software Delivery (AIFSD) model, we pursue not only current efficiency optimization but also achieving spiral personal capability improvement through continuous practice, ultimately bringing sustainable efficiency enhancement. Repeated application of unified methodology allows experience accumulation and cognitive improvement to mutually promote each other, ultimately forming a benign human-AI collaboration ecosystem.</li>
</ol>
<p><img loading="lazy" src="/../images/cognitive_improve_process_by_using_AI_en.png" alt="cognitive_improve_process_by_using_AI_en.png"></p>
<p>Through this practice, we have preliminarily explored the application possibilities of PDD methodology in complex SQL scenarios in the data domain and summarized a feasible path for handling complex SQL in the Data field (click to read the original text to view structured prompt templates). This provides a practical foundation for reference in subsequent similar scenario work.</p>
<p>Looking to the future, with application in more actual projects and continuous optimization of the methodology, PDD has the potential to bring certain degrees of improvement in software development efficiency and quality. Through continuous practical reflection and experience accumulation, we expect to gradually improve the applicable boundaries and operational details of this methodology.</p>
<p>Finally, thank you for reading!</p>

		</div>

		
		<div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
			<div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> Structured prompt driven development, practiced in the field of data</li>
        <li><strong>作者:</strong> Willie Zhang</li>
        <li><strong>创建于
                :</strong> 2025-06-18 19:00:00</li>
        
            <li>
                <strong>更新于
                    :</strong> 2025-06-18 09:52:24
            </li>
        
        <li>
            <strong>链接:</strong> https://redefine.ohevan.com/2025/06/18/PDD-practice-in-the-field-of-data/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。
            
        </li>
    </ul>
</div>

		</div>
		

		
		<ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
			
			<li class="tag-item mx-0.5">
				<a href="/tags/AI/">#AI</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/Prompts/">#Prompts</a>&nbsp;
			</li>
			
			<li class="tag-item mx-0.5">
				<a href="/tags/Governance/">#Governance</a>&nbsp;
			</li>
			
		</ul>
		

		

		
		<div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
			
			
			<div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
				<a class="next" rel="next" href="/2025/06/09/AI-assisted-software-delivery-full-process-maturity-model-white-paper-en/">
					<span class="title flex justify-center items-center">
						<span class="post-nav-title-item truncate max-w-48">AI-Assisted Software Delivery Maturity Model:A Comprehensive Guide from L0 to L5</span>
						<span class="post-nav-item">下一篇</span>
					</span>
					<span class="right arrow-icon flex justify-center items-center">
						<i class="fa-solid fa-chevron-right"></i>
					</span>
				</a>
			</div>
			
		</div>
		


		
		<div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
			<div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        评论
    </div>
    

        
            
    <div id="waline"></div>
    <script type="module" data-swup-reload-script>
      import { init } from '/js/libs/waline.mjs';

      function loadWaline() {
        init({
          el: '#waline',
          serverURL: 'https://example.example.com',
          dark: 'body[class~="dark-mode"]',
          reaction: false,
          requiredMeta: ['nick', 'mail'],
          emoji: [],
                    lang: 'en-US',
        });
      }

      if (typeof swup !== 'undefined') {
        loadWaline();
      } else {
        window.addEventListener('DOMContentLoaded', loadWaline);
      }
    </script>



        
    
</div>

		</div>
		
	</div>

	
	<div class="toc-content-container">
		<div class="post-toc-wrap">
	<div class="post-toc">
		<div class="toc-title">目录</div>
		<div class="page-title">Structured prompt driven development, practiced in the field of data</div>
		<ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction"><span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Project-Background"><span class="nav-text">Project Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Implementation-Process"><span class="nav-text">Implementation Process</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Phase-One-Exploration-and-Breakthrough-with-AI-Collaboration"><span class="nav-text">Phase One: Exploration and Breakthrough with AI Collaboration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Phase-Two-Understanding-Business-Essence-Reconstructing-Solutions"><span class="nav-text">Phase Two: Understanding Business Essence, Reconstructing Solutions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Phase-Three-Performance-Optimization"><span class="nav-text">Phase Three: Performance Optimization</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Structured-Prompt-Driven-Development-PDD-Application-Methodology-in-Data-Domain"><span class="nav-text">Structured Prompt Driven Development (PDD) Application Methodology in Data Domain</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Core-Applications-of-PDD-in-SQL-Development"><span class="nav-text">Core Applications of PDD in SQL Development</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Overall-Practice-Process"><span class="nav-text">Overall Practice Process</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation-Recommendations-and-Best-Practices"><span class="nav-text">Implementation Recommendations and Best Practices</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Personnel-Capability-Requirements-in-Complex-Scenarios"><span class="nav-text">Personnel Capability Requirements in Complex Scenarios</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary-and-Future-Outlook"><span class="nav-text">Summary and Future Outlook</span></a></li></ol>

	</div>
</div>
	</div>
	
</div>
			</div>

			
		</div>

		<div class="main-content-footer">
			<footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Willie Zhang</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共撰写了 14 篇文章
                    </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">访问人数</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.8.5</a></span>
        </div>
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
		</div>
	</div>

	
	<div class="post-tools">
		<div class="post-tools-container">
	<ul class="article-tools-list">
		<!-- TOC aside toggle -->
		
		<li class="right-bottom-tools page-aside-toggle">
			<i class="fa-regular fa-outdent"></i>
		</li>
		

		<!-- go comment -->
		
		<li class="go-comment">
			<i class="fa-regular fa-comments"></i>
		</li>
		
	</ul>
</div>
	</div>
	

	<div class="right-side-tools-container">
		<div class="side-tools-container">
	<ul class="hidden-tools-list">
		<li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-plus"></i>
		</li>

		<li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
			<i class="fa-regular fa-magnifying-glass-minus"></i>
		</li>

		<li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
			<i class="fa-regular fa-moon"></i>
		</li>

		<!-- rss -->
		

		

		<li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
			<i class="fa-regular fa-arrow-down"></i>
		</li>
	</ul>

	<ul class="visible-tools-list">
		<li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
			<i class="fa-regular fa-cog fa-spin"></i>
		</li>
		
		<li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
			<i class="arrow-up fas fa-arrow-up"></i>
			<span class="percent"></span>
		</li>
		
		
	</ul>
</div>
	</div>

	<div class="image-viewer-container">
	<img src="">
</div>

	

</main>



<script src="/js/build/libs/Swup.min.js"></script>

<script src="/js/build/libs/SwupSlideTheme.min.js"></script>

<script src="/js/build/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/build/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/build/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/build/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>




	
<script src="/js/build/tools/imageViewer.js" type="module"></script>

<script src="/js/build/utils.js" type="module"></script>

<script src="/js/build/main.js" type="module"></script>

<script src="/js/build/layouts/navbarShrink.js" type="module"></script>

<script src="/js/build/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/build/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/build/layouts/categoryList.js" type="module"></script>





    
<script src="/js/build/tools/codeBlock.js" type="module"></script>




    
<script src="/js/build/layouts/lazyload.js" type="module"></script>




    
<script src="/js/build/tools/runtime.js"></script>

    
<script src="/js/build/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/build/libs/Typed.min.js"></script>

  
<script src="/js/build/plugins/typed.js" type="module"></script>








    
<script src="/js/build/libs/anime.min.js"></script>





    
<script src="/js/build/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/build/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/build/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/build/layouts/essays.js" type="module" data-swup-reload-script=""></script>





	
</body>

</html>